<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Gerador Inteligente de S√©rie de Pilates - Prof¬™ JAQUE</title>
  <link rel="icon" href="https://zeus-rr.github.io/Nine/iconer.ico">

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            bg: { light: '#f5f9fb', dark: '#1a1c21' },
            card: { light: '#ffffff', dark: '#24282f' },
            accent: { light: '#1168b1', dark: '#53a8ff' },
            muted: { light: '#556', dark: '#a7b0c0' },
            text: { light: '#122', dark: '#e6f0ff' },
            border: { light: '#e6eef5', dark: '#333a44' },
          },
          boxShadow: {
            soft: '0 8px 24px rgba(17, 104, 177, 0.07)',
            dark: '0 4px 16px rgba(0, 0, 0, 0.4)',
          },
        },
      },
    }
  </script>

  <!-- jsPDF -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>

<body class="bg-bg-light text-text-light dark:bg-bg-dark dark:text-text-dark min-h-screen p-4 transition-colors duration-300">
  <div class="max-w-6xl mx-auto">
    <header class="flex flex-wrap items-center justify-between mb-6 gap-3">
      <div class="flex items-center gap-3">
        <img src="icone1.png" alt="Logo" class="w-12 h-10 rounded-md object-contain">
        <div>
          <h1 class="text-xl sm:text-2xl font-bold text-accent-light dark:text-accent-dark">Prof¬™ JAQUE</h1>
          <p class="text-sm text-muted-light dark:text-muted-dark">Gerador Inteligente de S√©ries de Pilates</p>
        </div>
      </div>

      <div class="flex flex-wrap gap-2 justify-center">
        <button id="btnTheme" class="border border-accent-light dark:border-accent-dark text-accent-light dark:text-accent-dark font-semibold rounded-lg px-4 py-2 hover:opacity-90 transition">&#9788;</button>
        <button id="btnGenerate" class="bg-accent-light dark:bg-accent-dark text-white font-bold rounded-lg px-4 py-2 hover:opacity-90 transition">Gerar S√©rie Inteligente</button>
        <button id="btnPdf" class="bg-accent-light dark:bg-accent-dark text-white font-bold rounded-lg px-4 py-2 hover:opacity-90 transition">Baixar PDF</button>
      </div>
    </header>

    <div class="grid grid-cols-1 lg:grid-cols-[360px_1fr] gap-4">
      <!-- FORMUL√ÅRIO -->
      <aside class="bg-card-light dark:bg-card-dark border border-border-light dark:border-border-dark shadow-soft dark:shadow-dark rounded-xl p-4">
        <h2 class="text-lg font-semibold text-accent-light dark:text-accent-dark mb-3">Anamnese</h2>

        <label class="font-semibold">Nome</label>
        <input id="nome" type="text" class="w-full p-2 rounded-md border border-border-light dark:border-border-dark bg-white dark:bg-bg-dark mb-2">

        <label class="font-semibold">Idade</label>
        <input id="idade" type="number" class="w-full p-2 rounded-md border border-border-light dark:border-border-dark bg-white dark:bg-bg-dark mb-2">

        <label class="font-semibold">N√≠vel</label>
        <select id="nivel" class="w-full p-2 rounded-md border border-border-light dark:border-border-dark bg-white dark:bg-bg-dark mb-2">
          <option>Iniciante</option>
          <option>Intermedi√°rio</option>
          <option>Avan√ßado</option>
        </select>

        <label class="font-semibold">Objetivo</label>
        <select id="objetivo" class="w-full p-2 rounded-md border border-border-light dark:border-border-dark bg-white dark:bg-bg-dark mb-2">
          <option>Condicionamento</option>
          <option>Reabilita√ß√£o</option>
          <option>Fortalecimento</option>
          <option>Flexibilidade</option>
        </select>

        <label class="font-semibold">Restri√ß√µes / Les√µes</label>
        <textarea id="restricoes" rows="2" class="w-full p-2 rounded-md border border-border-light dark:border-border-dark bg-white dark:bg-bg-dark"></textarea>
      </aside>

      <!-- RESULTADO -->
      <main id="resultado" class="bg-card-light dark:bg-card-dark border border-border-light dark:border-border-dark shadow-soft dark:shadow-dark rounded-xl p-4">
        <h2 class="text-lg font-semibold text-accent-light dark:text-accent-dark mb-3">S√©rie Inteligente Gerada</h2>
        <div id="serie" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-4"></div>
        <div id="observacoes" class="mt-4 text-sm text-muted-light dark:text-muted-dark"></div>
      </main>
    </div>
  </div>

  <script>
    // üåó Controle de tema com persist√™ncia
    const btnTheme = document.getElementById('btnTheme');
    btnTheme.addEventListener('click', () => {
      document.body.classList.toggle('dark');
      localStorage.setItem('theme', document.body.classList.contains('dark') ? 'dark' : 'light');
    });
    if (localStorage.getItem('theme') === 'dark') document.body.classList.add('dark');

    // Banco de exerc√≠cios por categoria
    const banco = {
      geral: [
        { nome: "Prancha", desc: "Fortalece o core e melhora a postura.", tags: ["core", "geral"], img: "https://picsum.photos/300/200?1" },
        { nome: "Ponte", desc: "Ativa gl√∫teos e lombar.", tags: ["lombar", "gluteo"], img: "https://picsum.photos/300/200?2" },
        { nome: "Cem", desc: "Trabalha respira√ß√£o e estabilidade abdominal.", tags: ["abdomen"], img: "https://picsum.photos/300/200?3" },
        { nome: "Roll Down", desc: "Mobiliza a coluna.", tags: ["coluna"], img: "https://picsum.photos/300/200?4" },
        { nome: "Single Leg Stretch", desc: "Controle e flex√£o abdominal.", tags: ["abdomen"], img: "https://picsum.photos/300/200?5" },
        { nome: "Teaser", desc: "Equil√≠brio e for√ßa de centro.", tags: ["core", "equilibrio"], img: "https://picsum.photos/300/200?6" },
        { nome: "Saw", desc: "Rota√ß√£o e alongamento.", tags: ["coluna", "alongamento"], img: "https://picsum.photos/300/200?7" },
        { nome: "Mermaid", desc: "Alongamento lateral.", tags: ["ombro", "alongamento"], img: "https://picsum.photos/300/200?9" },
        { nome: "Spine Stretch", desc: "Alongamento ativo da coluna.", tags: ["coluna", "flexibilidade"], img: "https://picsum.photos/300/200?8" },
      ]
    };

    // üß† Fun√ß√£o inteligente de gera√ß√£o
    document.getElementById('btnGenerate').addEventListener('click', () => {
      const nome = document.getElementById('nome').value || "Aluno(a)";
      const idade = parseInt(document.getElementById('idade').value || 30);
      const nivel = document.getElementById('nivel').value;
      const objetivo = document.getElementById('objetivo').value;
      const restricoes = document.getElementById('restricoes').value.toLowerCase();

      const container = document.getElementById('serie');
      const obs = document.getElementById('observacoes');
      container.innerHTML = "";
      obs.innerHTML = "";

      // Filtro inteligente por restri√ß√£o
      let lista = banco.geral.filter(ex => {
        if (restricoes.includes("lomb")) return !ex.tags.includes("lombar");
        if (restricoes.includes("ombro")) return !ex.tags.includes("ombro");
        if (restricoes.includes("joelho")) return !ex.tags.includes("joelho");
        return true;
      });

      // Ajuste por objetivo
      if (objetivo === "Reabilita√ß√£o") lista = lista.slice(0, 4);
      if (objetivo === "Fortalecimento") lista = lista.slice(2, 6);
      if (objetivo === "Flexibilidade") lista = lista.filter(ex => ex.tags.includes("alongamento") || ex.tags.includes("flexibilidade"));

      // Ajuste por n√≠vel
      if (nivel === "Iniciante") lista = lista.slice(0, 3);
      if (nivel === "Avan√ßado") lista.push({ nome: "Roll Over", desc: "Exerc√≠cio avan√ßado de controle e for√ßa.", img: "https://picsum.photos/300/200?10" });

      // Ajuste por idade
      if (idade > 60) lista = lista.filter(ex => !ex.tags.includes("teaser") && !ex.tags.includes("equilibrio"));

      // Montagem visual
      lista.forEach(ex => {
        const card = document.createElement("div");
        card.className = "flex flex-col gap-2 bg-bg-light dark:bg-bg-dark border border-border-light dark:border-border-dark rounded-lg p-3 hover:-translate-y-1 transition-transform";
        card.innerHTML = `<img src="${ex.img}" alt="${ex.nome}" class="w-full h-32 object-cover rounded-md"><h4 class="font-bold text-accent-light dark:text-accent-dark">${ex.nome}</h4><p class="text-sm text-muted-light dark:text-muted-dark">${ex.desc}</p>`;
        container.appendChild(card);
      });

      // Observa√ß√µes personalizadas
      let nota = [];
      if (restricoes.includes("lomb")) nota.push("‚ö†Ô∏è Evitar sobrecarga lombar ‚Äî priorizar alongamentos e estabiliza√ß√£o.");
      if (restricoes.includes("ombro")) nota.push("‚ö†Ô∏è Reduzir amplitude nos exerc√≠cios de bra√ßo e evitar carga direta.");
      if (idade > 60) nota.push("üïäÔ∏è Sugere-se intensidade leve e foco em mobilidade e equil√≠brio.");
      if (nivel === "Avan√ßado") nota.push("üî• Incluir varia√ß√µes desafiadoras e controle respirat√≥rio refinado.");

      obs.innerHTML = `<h3 class="font-semibold text-accent-light dark:text-accent-dark mt-3 mb-1">Observa√ß√µes:</h3><ul class="list-disc pl-5">${nota.map(n => `<li>${n}</li>`).join("")}</ul>`;
      document.querySelector('#resultado h2').textContent = `S√©rie de ${nome} ‚Äî ${objetivo}`;
    });

    // üìÑ Gera√ß√£o de PDF
    document.getElementById('btnPdf').addEventListener('click', () => {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();
      doc.text("S√©rie de Pilates Inteligente", 10, 10);
      doc.text(document.querySelector('#resultado h2').textContent, 10, 20);
      doc.save("serie_pilates_inteligente.pdf");
    });
  </script>
</body>
</html>
